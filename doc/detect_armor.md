
[software framework]
- 需要做好多线程与数据共享
- std::thread camera_thread
- std::thread serial_thread
- std::thread vision_mul_thread
- 需要做好模块的耦合
- 
[algorithm]
- 1
- [分割]
- 根据 color 和 light 分别进行二值化
- 形态学: 膨胀, 开运算 (待加入, 对快递移动会有影响)
- 筛选lights: 如果亮度 rect 里有 color 分量, 则为灯条, 包括灯柱 [待优化]
- 
- 2 
- [Filterlights]
- adjustrect 调整灯条的角度和与长宽
- 针对高速移动带有拖影的灯条进行筛选
- 针对灯条细小的情况,较为理想进行筛选
- 包括:
- 根据灯条的数值角度
- 根据灯条自身的纵横比例
- 根据灯条的最大面积和最小面积
- 
- 3
- [匹配lights]
- 左右灯条的角度数值差(左边为负, 右边为正)
- 左右灯条的高度差 (已取消)
- 左右灯条的宽度差 (已取消)
- 矩形armor的长宽比例, 这一数值需要根据灯条的角度差来进行调整, 因为俯仰角会影响比例
- 包围矩形要取 max_height 与 min_width 可以更好固定比例,
- 矩形armor的平行角度与左右灯条的角度绝对值积累差[这是一个很有用的标准]
- armor自身的角度[待优化]
- [1] 装甲板快速移动,两灯条平行
- [2] 同上,其中一块略有倾斜
- [3] 针对中速拖影进行处理, 平行, 90度平行, 带有误差的平行[待补充]
- [4] 灯条几乎同侧的匹配
- [5] 灯条不同侧的误差匹配
- [6] 其他边界情况
- 
- 4
- [筛选armor]
- 进行一次去重操作
- 对大面积装甲板计算mean与stddev确定armor[待优化]
- 对小面积装甲板不计算
- 针对不同速度移动下的装甲板分类讨论mean与sttdev[待添加]
- SVM [待添加]
- 
- 5
- [确定要击打的装甲板]
- 根据 armor.size.area() 与 armor.angle 判断[待优化]
- 根据速度信息筛选一下
- 
- 6
- [待优化1]灯柱的pointPolygonTest可以由中心点代替,或寻求其他方法(已解决)
- [待优化2]需要更丰富的场景来确定宽泛的阈值
- [待优化3]需要更丰富的场景来确定宽泛的阈值
- [待优化4]需要区分大小装甲板(除了比例,更重要的是svm)
- [待优化4]需要区分工程装甲板与步兵装甲板
- [待优化4]后期可以考虑使用图像矩, svm 等等
- [待优化5]增加armor的dxdy信息, 云台坐标需要和串口数据相融合, 底盘坐标则不需要
- 7
- [detail补充]
- armor_info...{dxdy}
- 单装甲和多装甲的自由识别 
- 大\小装甲板区分识别
- 要考虑加领域搜索的vector....
- 连续搜索_cnt = 5 
- lost_cnt = 3        [ok]
- 摄像头要加std::thread [ok]

- 8
- [Filterarmor]
- 根据mean与stddev
- 根据灰度直方图的匹配度
- svm(最准确)  100x25   60x25